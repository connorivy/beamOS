<?xml version="1.0" encoding="utf-8"?>
<Project>
  <Import Project="$([MSBuild]::GetPathOfFileAbove('Directory.Build.props', '$(MSBuildThisFileDirectory)..\'))" />

  <!-- In development, regenerate wrappers after build instead of after publish -->
  <PropertyGroup Condition="'$(DotWrapRelativeLocation)' != ''">
    <DotWrapGenerateAfterBuild>true</DotWrapGenerateAfterBuild>
  </PropertyGroup>
  <!-- Use project references locally, but use nuget package in CI -->
  <ItemGroup Condition="'$(DotWrapRelativeLocation)' != ''">
    <ProjectReference
      Include="$(DotWrapRelativeLocation)\src\DotWrap.Generator\DotWrap.Generator.csproj"
      OutputItemType="Analyzer"
      ReferenceOutputAssembly="false"
    />
    <ProjectReference Include="$(DotWrapRelativeLocation)\src\DotWrap\DotWrap.csproj" />
    <ProjectReference Include="$(DotWrapRelativeLocation)\src\DotWrap.MSBuild\DotWrap.MSBuild.csproj" />
  </ItemGroup>
  <Import
    Condition="'$(DotWrapRelativeLocation)' != ''"
    Project="$(DotWrapRelativeLocation)\src\DotWrap\Build\DotWrap.props"
  />
  <Import
    Condition="'$(DotWrapRelativeLocation)' != ''"
    Project="$(DotWrapRelativeLocation)\src\DotWrap\Build\DotWrap.targets"
  />
  <ItemGroup Condition="'$(DotWrapRelativeLocation)' == ''">
    <PackageReference Include="DotWrap" />
  </ItemGroup>
</Project>
